import {
  IconButton,
  IconButtonProps,
  createIcon,
  Flex,
  Text,
} from '@chakra-ui/react';
import { useRequest } from 'ahooks';
import * as globalApis from '@/services/global';
import { useSwitchChain } from '@/hooks/useSwitchChain';

const GasIcon = createIcon({
  displayName: 'Nav Gas Icon',
  viewBox: '0 0 16 16',
  path: [
    <path
      key="p1"
      fillRule="evenodd"
      clipRule="evenodd"
      d="M2.5 1C1.67157 1 1 1.72323 1 2.61538V13.3846C1 14.2768 1.67157 15 2.5 15H8.5C9.32843 15 10 14.2768 10 13.3846V10.1559C10.8564 10.2028 11.5385 11.0277 11.5385 12.0385V12.9808C11.5385 14.096 12.3134 15 13.2692 15C14.2251 15 15 14.096 15 12.9808V5.62824C15 5.60442 14.9997 5.58064 14.9992 5.55689C14.9997 5.53799 15 5.51903 15 5.5C15 5.33133 14.9791 5.16754 14.9398 5.01106C14.8491 4.55211 14.658 4.12449 14.3812 3.77216L12.3402 1.17461C12.168 0.955395 11.876 0.940586 11.6881 1.14154C11.5002 1.34249 11.4875 1.6831 11.6598 1.90232L12.9164 3.50171C11.8506 3.54551 11 4.42342 11 5.5C11 6.60457 11.8954 7.5 13 7.5C13.3965 7.5 13.7661 7.38462 14.0769 7.18559V12.9808C14.0769 13.5012 13.7153 13.9231 13.2692 13.9231C12.8232 13.9231 12.4615 13.5012 12.4615 12.9808V12.0385C12.4615 10.4329 11.3664 9.1257 10 9.07826V2.61538C10 1.72323 9.32843 1 8.5 1H2.5ZM8.5 4C8.77614 4 9 3.77614 9 3.5V2.5C9 2.22386 8.77614 2 8.5 2H2.5C2.22386 2 2 2.22386 2 2.5V3.5C2 3.77614 2.22386 4 2.5 4H8.5ZM14 5.5C14 6.05228 13.5523 6.5 13 6.5C12.4477 6.5 12 6.05228 12 5.5C12 4.94772 12.4477 4.5 13 4.5C13.5523 4.5 14 4.94772 14 5.5Z"
      fill="white"
      fillOpacity="0.4"
    />,
    // <path
    //   key="p1"
    //   d="M25.1327 6.04625C24.2435 5.60167 23.4957 5.31015 23.4641 5.29807C23.1391 5.17197 22.7721 5.33399 22.6457 5.66115C22.5192 5.98798 22.6829 6.35541 23.0097 6.48151C23.0169 6.48429 23.7279 6.76343 24.5638 7.18135C25.1999 7.4992 25.7294 8.47414 25.7294 9.31031V20.2494C25.7294 20.9328 25.2864 21.6227 24.6013 21.6227H23.9668C23.2769 21.6227 22.5678 20.9502 22.5678 20.2494V14.0506V13.7334V11.6484C22.5678 9.97145 21.5133 8.59321 20.1596 8.59321H18.7561V3.07122C18.7561 2.0746 18.1009 1 16.987 1H4.93107C3.8888 1 2.88896 2.02904 2.88896 3.07122V25.7295H1.63454C1.28413 25.7295 1 26.0144 1 26.3648C1 26.7152 1.2841 27 1.63454 27H3.53813H18.1322H20.0358C20.3862 27 20.6703 26.7152 20.6703 26.3648C20.6703 26.0144 20.3862 25.7295 20.0358 25.7295H18.7562V9.86364H20.1597C20.8448 9.86364 21.2973 10.8169 21.2973 11.6484V13.7334V14.0506V20.2494C21.2973 21.654 22.5736 22.8932 23.9669 22.8932H24.6014C25.9327 22.8932 27 21.7293 27 20.2494V9.31034C27 7.98407 26.2016 6.58066 25.1327 6.04625ZM4.15952 25.7295V3.07122C4.15952 2.72395 4.58377 2.27045 4.93107 2.27045H16.9871C17.2926 2.27045 17.4856 2.70504 17.4856 3.07122V25.7295H4.15952Z"
    //   fill="currentColor"
    //   stroke="currentColor"
    //   strokeWidth="1"
    // />,
    // <path
    //   key="p2"
    //   d="M15.8184 5.12082C15.8184 4.77041 15.5234 4.48633 15.1595 4.48633H7.57887C7.21495 4.48633 6.91992 4.77038 6.91992 5.12082V10.2041C6.91992 10.5546 7.21492 10.8386 7.57887 10.8386H15.1595C15.5234 10.8386 15.8184 10.5546 15.8184 10.2041V5.12082ZM14.4989 9.56815H8.23935V5.75678H14.4989V9.56815Z"
    //   fill="currentColor"
    //   stroke="currentColor"
    //   strokeWidth="1"
    // />,
  ],
});

export default function GasButton(props: Omit<IconButtonProps, 'aria-label'>) {
  const { visitChain } = useSwitchChain();
  // const { data } = useRequest(
  //   () => globalApis.getGas({ chain_id: visitChain.id }),
  //   {
  //     refreshDeps: [visitChain.id],
  //     pollingInterval: 12000,
  //     refreshOnWindowFocus: true,
  //     pollingWhenHidden: false,
  //     pollingErrorRetryCount: 5,
  //   },
  // );

  return (
    <Flex
      borderRadius="12px"
      border={{ base: 'none', md: '1px solid #404040' }}
      align={'center'}
      padding={{ base: '0', md: '12px 16px' }}
      h="40px"
      _hover={{ opacity: 0.6 }}
    >
      <IconButton
        bg="none !important"
        aria-label=""
        fontSize={22}
        size="sm"
        {...props}
        icon={<GasIcon />}
      />

      <Text fontFamily={'Inter'} fontSize="sm" color="#808080">
        {/* {data && data.data ? +data.data.SafeGasPrice : 0} */}-
      </Text>
    </Flex>
  );
}
